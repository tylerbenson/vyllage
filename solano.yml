hooks:
  pre_setup: npm install
  pre_setup: ./gradlew jar

nodejs:
  version: '0.12.4'

java:
  java_version: java-8-oracle

tests:
  - type: junit
    command: ./gradlew :accounts:test
    report_files:
    - "accounts/build/test-results/*.xml"
  - type: junit
    command: npm test
    report_files:
    - "assets/build/test-results/*.xml"
  - type: junit
    command: ./gradlew :connections:test
    report_files:
    - "connections/build/test-results/*.xml"
  - type: junit
    command: ./gradlew :documents:test
    report_files:
    - "documents/build/test-results/*.xml"
  - type: junit
    command: ./gradlew :email:test
    report_files:
    - "email/build/test-results/*.xml"
  - type: junit
    command: ./gradlew :site:test
    report_files:
    - "site/build/test-results/*.xml"
  - type: junit
    command: ./gradlew :togglz:test
    report_files:
    - "togglz/build/test-results/*.xml"
  - type: junit
    command: ./gradlew :user-common:test
    report_files:
    - "user-common/build/test-results/*.xml"

coverage: true

cache:
  key_paths:     # Define the files Solano will use to determine when to rebuild your cache
  - build.gradle
  - accounts/build.gradle
  - assets/build.gradle
  - connections/build.gradle
  - documents/build.gradle
  - email/build.gradle
  - site/build.gradle
  - togglz/build.gradle
  - user-common/build.gradle
  save_paths:    # Define the paths to save into the cache
  - .gradle      # Relative to the repo
  - HOME/.gradle
